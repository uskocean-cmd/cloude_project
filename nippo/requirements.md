# 営業日報システム 要件定義書

## 1. システム概要

### 1.1 目的

営業担当者が日々の訪問活動を記録し、上長が適切なフィードバックを行うことで、営業活動の質を向上させることを目的とする。

### 1.2 対象ユーザー

- 営業担当者：日報の作成・提出
- 上長：部下の日報確認・承認・コメント

## 2. ユーザーロール

| ロール     | 権限                                                       |
| ---------- | ---------------------------------------------------------- |
| 営業担当者 | 自分の日報の作成・編集・提出、上長コメントの閲覧           |
| 上長       | 部下の日報の閲覧・承認、コメントの追加、集計レポートの閲覧 |

## 3. 機能要件

### 3.1 日報作成機能

- **日報の基本情報**
  - 日付（自動設定、変更可能）
  - ステータス（下書き / 提出済み / 承認済み）

- **訪問記録の登録**
  - 1日に複数の顧客訪問を登録可能
  - 各訪問記録には以下を含む：
    - 顧客（顧客マスタから選択）
    - 訪問内容（テキスト）
    - 訪問時間（オプション）

- **Problem（課題・相談）の記入**
  - 今日の課題や相談事項を記述
  - 複数項目の登録が可能

- **Plan（明日の予定）の記入**
  - 明日やることを記述
  - 複数項目の登録が可能

### 3.2 日報提出・承認機能

- **提出機能**
  - 下書き状態の日報を提出
  - 提出後は編集不可

- **承認機能（上長のみ）**
  - 提出された日報を確認
  - 承認またはコメント付き差し戻し

- **コメント機能**
  - 上長がProblemやPlanに対してコメント可能
  - 日報全体に対するコメントも可能

### 3.3 日報検索・閲覧機能

- **検索条件**
  - 日付範囲
  - 営業担当者
  - 顧客
  - ステータス

- **閲覧機能**
  - 一覧表示
  - 詳細表示
  - 訪問履歴の確認

### 3.4 集計・レポート機能

- **営業担当者別の集計**
  - 訪問件数（日次・週次・月次）
  - 提出状況

- **顧客別の集計**
  - 訪問回数
  - 最終訪問日
  - 訪問履歴一覧

- **レポート出力**
  - CSV/Excel形式でのエクスポート
  - 期間指定でのレポート生成

### 3.5 マスタ管理機能

- **営業マスタ**
  - 営業ID
  - 氏名
  - メールアドレス
  - 上長フラグ（上長かどうか）
  - 上長ID（所属する上長のID）
  - 部署
  - 在籍ステータス

- **顧客マスタ**
  - 顧客ID
  - 顧客名
  - 住所
  - 電話番号
  - 担当営業ID
  - 業種
  - 取引ステータス

## 4. 非機能要件

### 4.1 セキュリティ

- ログイン認証機能
- ロールベースのアクセス制御
- 自分の日報のみ編集可能
- 上長は自分の部下の日報のみ閲覧可能

### 4.2 ユーザビリティ

- レスポンシブデザイン（PC・タブレット・スマートフォン対応）
- 直感的な操作性
- エラーメッセージの適切な表示

### 4.3 パフォーマンス

- 画面表示は3秒以内
- 検索結果の表示は5秒以内

### 4.4 可用性

- 営業時間中は99%以上の稼働率

## 5. 主要な画面一覧

### 5.1 営業担当者向け画面

1. **ダッシュボード**
   - 本日の日報作成状況
   - 未読の上長コメント
   - 直近の訪問予定

2. **日報作成・編集画面**
   - 訪問記録の追加・編集
   - Problem/Planの記入
   - 下書き保存・提出

3. **日報一覧画面**
   - 過去の日報一覧
   - 検索・フィルタ機能

4. **日報詳細画面**
   - 日報の詳細表示
   - 上長コメントの確認

### 5.2 上長向け画面

1. **ダッシュボード**
   - 未承認の日報件数
   - 部下の提出状況
   - チームの訪問件数サマリー

2. **日報承認画面**
   - 部下の日報一覧
   - 日報の詳細確認
   - コメント記入・承認

3. **レポート画面**
   - 営業担当者別の集計
   - 顧客別の訪問履歴
   - グラフ・チャート表示

### 5.3 管理者向け画面

1. **営業マスタ管理**
   - 営業情報の追加・編集・削除
   - 上長の設定

2. **顧客マスタ管理**
   - 顧客情報の追加・編集・削除
   - 担当営業の割り当て

## 6. データモデル概要

### 6.1 主要エンティティ

- **営業（Sales）**: 営業担当者および上長の情報
- **顧客（Customer）**: 顧客の基本情報
- **日報（DailyReport）**: 日次の営業日報
- **訪問記録（VisitRecord）**: 個別の顧客訪問記録
- **上長コメント（SupervisorComment）**: 上長からのフィードバック

### 6.2 リレーションシップ

- 営業 1:N 日報（1人の営業が複数の日報を作成）
- 日報 1:N 訪問記録（1つの日報に複数の訪問記録）
- 顧客 1:N 訪問記録（1つの顧客が複数回訪問される）
- 日報 1:N 上長コメント（1つの日報に複数のコメント）
- 営業 1:N 営業（上長と部下の関係）

## 7. システム構成

### 7.1 想定技術スタック

- **フロントエンド**: React / Next.js
- **バックエンド**: Node.js / Express または Next.js API Routes
- **データベース**: PostgreSQL / MySQL
- **認証**: NextAuth.js または Firebase Authentication
- **デプロイ**: Vercel / AWS / GCP

### 7.2 開発フェーズ

1. **フェーズ1**: 基本機能（日報作成・提出・承認）
2. **フェーズ2**: 検索・閲覧機能
3. **フェーズ3**: 集計・レポート機能
4. **フェーズ4**: 通知機能・UI/UX改善

## 8. 今後の拡張可能性

- スマートフォンアプリ開発
- 顧客情報のCRM連携
- AIによる訪問提案機能
- 音声入力対応
- 画像・ファイル添付機能
